(cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF'
diff --git a/stat (2).html b/stat (2).html
--- a/stat (2).html
+++ b/stat (2).html
@@ -0,0 +1,579 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8" />
+  <meta name="viewport" content="width=device-width, initial-scale=1" />
+  <title>Water Parameters Dashboard</title>
+  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
+  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
+  <script src="https://cdn.tailwindcss.com"></script>
+  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
+  <style>
+    body {
+      font-family: 'Inter', sans-serif;
+      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
+    }
+    
+    .dashboard-container {
+      background: rgba(255, 255, 255, 0.95);
+      backdrop-filter: blur(10px);
+      border-radius: 20px;
+      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
+    }
+    
+    .parameter-card {
+      cursor: pointer;
+      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
+      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
+      border: 2px solid transparent;
+      position: relative;
+      overflow: hidden;
+    }
+    
+    .parameter-card::before {
+      content: '';
+      position: absolute;
+      top: 0;
+      left: 0;
+      right: 0;
+      bottom: 0;
+      background: linear-gradient(135deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 100%);
+      opacity: 0;
+      transition: opacity 0.4s ease;
+    }
+    
+    .parameter-card:hover {
+      transform: translateY(-8px) scale(1.02);
+      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
+      border-color: currentColor;
+    }
+    
+    .parameter-card:hover::before {
+      opacity: 1;
+    }
+    
+    .parameter-card:active {
+      transform: translateY(-4px) scale(1.01);
+    }
+    
+    .value {
+      font-size: 2.25rem;
+      font-weight: 700;
+      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
+      -webkit-background-clip: text;
+      -webkit-text-fill-color: transparent;
+      background-clip: text;
+    }
+    
+    .unit {
+      font-size: 1rem;
+      color: #6b7280;
+      margin-left: 6px;
+      font-weight: 600;
+    }
+    
+    .icon-wrapper {
+      width: 60px;
+      height: 60px;
+      border-radius: 15px;
+      display: flex;
+      align-items: center;
+      justify-content: center;
+      transition: transform 0.3s ease;
+    }
+    
+    .parameter-card:hover .icon-wrapper {
+      transform: rotate(10deg) scale(1.1);
+    }
+    
+    /* Modal Styles */
+    .modal {
+      display: none;
+      position: fixed;
+      z-index: 1000;
+      left: 0;
+      top: 0;
+      width: 100%;
+      height: 100%;
+      background-color: rgba(0, 0, 0, 0.7);
+      backdrop-filter: blur(5px);
+      animation: fadeIn 0.3s ease;
+    }
+    
+    .modal.active {
+      display: flex;
+      align-items: center;
+      justify-content: center;
+    }
+    
+    .modal-content {
+      background: white;
+      border-radius: 20px;
+      max-width: 900px;
+      width: 90%;
+      max-height: 90vh;
+      overflow-y: auto;
+      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
+      animation: slideUp 0.3s ease;
+    }
+    
+    @keyframes fadeIn {
+      from { opacity: 0; }
+      to { opacity: 1; }
+    }
+    
+    @keyframes slideUp {
+      from {
+        transform: translateY(30px);
+        opacity: 0;
+      }
+      to {
+        transform: translateY(0);
+        opacity: 1;
+      }
+    }
+    
+    .close-btn {
+      transition: all 0.3s ease;
+    }
+    
+    .close-btn:hover {
+      transform: rotate(90deg);
+      color: #ef4444;
+    }
+    
+    .definition-box {
+      background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
+      border-left: 4px solid #667eea;
+    }
+    
+    .chart-container {
+      position: relative;
+      height: 300px;
+      margin-top: 20px;
+    }
+    
+    /* Responsive grid */
+    @media (max-width: 768px) {
+      .value {
+        font-size: 1.75rem;
+      }
+      .icon-wrapper {
+        width: 50px;
+        height: 50px;
+      }
+    }
+  </style>
+</head>
+
+<body class="min-h-screen flex flex-col items-center justify-center p-4 md:p-6">
+  <div class="dashboard-container w-full max-w-6xl p-6 md:p-10">
+    <header class="mb-8 text-center">
+      <h1 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-2">
+        Environmental Condition
+      </h1>
+      <p class="text-gray-600 text-lg">Điều Kiện Môi Trường</p>
+    </header>
+
+    <!-- Dashboard layout: 3 cards on top, 2 cards centered on bottom -->
+    <main class="space-y-6">
+      <!-- Row 1: 3 cards -->
+      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
+        <!-- pH Card -->
+        <div class="parameter-card bg-white rounded-xl p-6 shadow-lg flex items-center space-x-4" 
+             onclick="openModal('ph')" 
+             style="color: #3b82f6;">
+          <div class="icon-wrapper" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);">
+            <i class="fas fa-tint text-blue-500 text-3xl"></i>
+          </div>
+          <div class="flex-1">
+            <h2 class="text-lg font-semibold text-gray-700 mb-1">pH</h2>
+            <p class="value"><span id="phValue">--</span></p>
+          </div>
+        </div>
+
+        <!-- DO Card -->
+        <div class="parameter-card bg-white rounded-xl p-6 shadow-lg flex items-center space-x-4" 
+             onclick="openModal('do')"
+             style="color: #10b981;">
+          <div class="icon-wrapper" style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);">
+            <i class="fas fa-wind text-green-500 text-3xl"></i>
+          </div>
+          <div class="flex-1">
+            <h2 class="text-lg font-semibold text-gray-700 mb-1">DO</h2>
+            <p class="text-sm text-gray-500 -mt-1">Dissolved Oxygen</p>
+            <p class="value"><span id="doValue">--</span><span class="unit">mg/L</span></p>
+          </div>
+        </div>
+
+        <!-- EC Card -->
+        <div class="parameter-card bg-white rounded-xl p-6 shadow-lg flex items-center space-x-4" 
+             onclick="openModal('ec')"
+             style="color: #8b5cf6;">
+          <div class="icon-wrapper" style="background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);">
+            <i class="fas fa-bolt text-purple-500 text-3xl"></i>
+          </div>
+          <div class="flex-1">
+            <h2 class="text-lg font-semibold text-gray-700 mb-1">EC</h2>
+            <p class="text-sm text-gray-500 -mt-1">Electrical Conductivity</p>
+            <p class="value"><span id="ecValue">--</span><span class="unit">µS/cm</span></p>
+          </div>
+        </div>
+      </div>
+
+      <!-- Row 2: 2 cards centered -->
+      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 max-w-3xl mx-auto">
+        <!-- TDS Card -->
+        <div class="parameter-card bg-white rounded-xl p-6 shadow-lg flex items-center space-x-4" 
+             onclick="openModal('tds')"
+             style="color: #14b8a6;">
+          <div class="icon-wrapper" style="background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%);">
+            <i class="fas fa-water text-teal-500 text-3xl"></i>
+          </div>
+          <div class="flex-1">
+            <h2 class="text-lg font-semibold text-gray-700 mb-1">TDS</h2>
+            <p class="text-sm text-gray-500 -mt-1">Total Dissolved Solids</p>
+            <p class="value"><span id="tdsValue">--</span><span class="unit">ppm</span></p>
+          </div>
+        </div>
+
+        <!-- Temperature Card -->
+        <div class="parameter-card bg-white rounded-xl p-6 shadow-lg flex items-center space-x-4" 
+             onclick="openModal('temp')"
+             style="color: #06b6d4;">
+          <div class="icon-wrapper" style="background: linear-gradient(135deg, #cffafe 0%, #a5f3fc 100%);">
+            <i class="fas fa-thermometer-half text-cyan-500 text-3xl"></i>
+          </div>
+          <div class="flex-1">
+            <h2 class="text-lg font-semibold text-gray-700 mb-1">Temperature</h2>
+            <p class="text-sm text-gray-500 -mt-1">Water Temp</p>
+            <p class="value"><span id="watertempValue">--</span><span class="unit">°C</span></p>
+          </div>
+        </div>
+      </div>
+    </main>
+
+    <!-- Footer with last update time -->
+    <footer class="mt-8 text-center text-sm text-gray-500">
+      <p>Last updated: <span id="lastUpdate">--</span></p>
+    </footer>
+  </div>
+
+  <!-- Modal for displaying parameter details and chart -->
+  <div id="parameterModal" class="modal">
+    <div class="modal-content">
+      <div class="sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between rounded-t-xl z-10">
+        <h2 class="text-2xl font-bold text-gray-800" id="modalTitle">Parameter Details</h2>
+        <button onclick="closeModal()" class="close-btn text-3xl text-gray-400 hover:text-gray-600 font-light">
+          &times;
+        </button>
+      </div>
+      
+      <div class="p-6">
+        <!-- Definition Section -->
+        <div class="definition-box p-4 rounded-lg mb-6">
+          <h3 class="font-semibold text-gray-700 mb-2 flex items-center">
+            <i class="fas fa-info-circle mr-2 text-blue-600"></i>
+            Definition / Định nghĩa
+          </h3>
+          <p class="text-gray-700" id="modalDefinition"></p>
+        </div>
+
+        <!-- Current Value -->
+        <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg mb-6">
+          <p class="text-sm text-gray-600 mb-1">Current Value / Giá trị hiện tại</p>
+          <p class="text-3xl font-bold" id="modalCurrentValue">--</p>
+        </div>
+
+        <!-- Chart Section -->
+        <div>
+          <h3 class="font-semibold text-gray-700 mb-3 flex items-center">
+            <i class="fas fa-chart-line mr-2 text-purple-600"></i>
+            Historical Data / Dữ liệu lịch sử (Last 20 readings)
+          </h3>
+          <div class="chart-container">
+            <canvas id="parameterChart"></canvas>
+          </div>
+        </div>
+      </div>
+    </div>
+  </div>
+
+  <!-- ERA Widget Script -->
+  <script src="https://www.unpkg.com/@eohjsc/era-widget@1.1.3/src/index.js"></script>
+  
+  <script>
+    // Parameter definitions
+    const parameterDefinitions = {
+      ph: {
+        title: 'pH',
+        definition: 'pH is a measure of acidity or alkalinity of water. It ranges from 0-14, where 7 is neutral, below 7 is acidic, and above 7 is alkaline. Optimal pH for aquatic life is typically 6.5-8.5. / pH là thước đo độ axit hoặc kiềm của nước. Thang đo từ 0-14, trong đó 7 là trung tính, dưới 7 là axit, trên 7 là kiềm. pH tối ưu cho sinh vật thủy sinh thường là 6.5-8.5.',
+        unit: '',
+        color: '#3b82f6'
+      },
+      do: {
+        title: 'DO (Dissolved Oxygen)',
+        definition: 'Dissolved Oxygen is the amount of oxygen dissolved in water, essential for aquatic life. Normal levels are 5-8 mg/L. Low DO can indicate pollution or eutrophication. / Oxy hòa tan là lượng oxy hòa tan trong nước, cần thiết cho sinh vật thủy sinh. Mức bình thường là 5-8 mg/L. DO thấp có thể chỉ ra ô nhiễm hoặc phú dinh dưỡng.',
+        unit: 'mg/L',
+        color: '#10b981'
+      },
+      ec: {
+        title: 'EC (Electrical Conductivity)',
+        definition: 'Electrical Conductivity measures the water\'s ability to conduct electricity, indicating the concentration of dissolved salts and minerals. Higher EC means more dissolved substances. / Độ dẫn điện đo khả năng dẫn điện của nước, chỉ ra nồng độ muối và khoáng chất hòa tan. EC cao có nghĩa là nhiều chất hòa tan hơn.',
+        unit: 'µS/cm',
+        color: '#8b5cf6'
+      },
+      tds: {
+        title: 'TDS (Total Dissolved Solids)',
+        definition: 'TDS measures the total concentration of dissolved substances in water including minerals, salts, and organic matter. Ideal drinking water has TDS below 300 ppm. / TDS đo tổng nồng độ các chất hòa tan trong nước bao gồm khoáng chất, muối và chất hữu cơ. Nước uống lý tưởng có TDS dưới 300 ppm.',
+        unit: 'ppm',
+        color: '#14b8a6'
+      },
+      temp: {
+        title: 'Water Temperature',
+        definition: 'Water temperature affects aquatic life metabolism, oxygen solubility, and chemical reaction rates. Most aquatic organisms thrive between 15-30°C. / Nhiệt độ nước ảnh hưởng đến trao đổi chất của sinh vật thủy sinh, độ hòa tan oxy và tốc độ phản ứng hóa học. Hầu hết sinh vật thủy sinh phát triển tốt ở 15-30°C.',
+        unit: '°C',
+        color: '#06b6d4'
+      }
+    };
+
+    // Historical data storage (max 20 points per parameter)
+    const historicalData = {
+      ph: { timestamps: [], values: [] },
+      do: { timestamps: [], values: [] },
+      ec: { timestamps: [], values: [] },
+      tds: { timestamps: [], values: [] },
+      temp: { timestamps: [], values: [] }
+    };
+
+    const MAX_DATA_POINTS = 20;
+    let currentChart = null;
+    let currentParameter = null;
+
+    // Add data point to historical data
+    function addDataPoint(param, value, timestamp) {
+      if (historicalData[param]) {
+        historicalData[param].values.push(value);
+        historicalData[param].timestamps.push(timestamp);
+        
+        // Keep only last MAX_DATA_POINTS
+        if (historicalData[param].values.length > MAX_DATA_POINTS) {
+          historicalData[param].values.shift();
+          historicalData[param].timestamps.shift();
+        }
+      }
+    }
+
+    // Format timestamp
+    function formatTime(date) {
+      return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
+    }
+
+    // Open modal
+    function openModal(param) {
+      currentParameter = param;
+      const modal = document.getElementById('parameterModal');
+      const def = parameterDefinitions[param];
+      
+      document.getElementById('modalTitle').textContent = def.title;
+      document.getElementById('modalDefinition').textContent = def.definition;
+      
+      // Get current value
+      let currentValueElement;
+      switch(param) {
+        case 'ph': currentValueElement = document.getElementById('phValue'); break;
+        case 'do': currentValueElement = document.getElementById('doValue'); break;
+        case 'ec': currentValueElement = document.getElementById('ecValue'); break;
+        case 'tds': currentValueElement = document.getElementById('tdsValue'); break;
+        case 'temp': currentValueElement = document.getElementById('watertempValue'); break;
+      }
+      
+      const currentValue = currentValueElement ? currentValueElement.textContent : '--';
+      document.getElementById('modalCurrentValue').textContent = currentValue + (def.unit ? ' ' + def.unit : '');
+      
+      modal.classList.add('active');
+      
+      // Draw chart
+      drawChart(param);
+    }
+
+    // Close modal
+    function closeModal() {
+      const modal = document.getElementById('parameterModal');
+      modal.classList.remove('active');
+      if (currentChart) {
+        currentChart.destroy();
+        currentChart = null;
+      }
+    }
+
+    // Close modal when clicking outside
+    window.onclick = function(event) {
+      const modal = document.getElementById('parameterModal');
+      if (event.target === modal) {
+        closeModal();
+      }
+    }
+
+    // Draw chart
+    function drawChart(param) {
+      if (currentChart) {
+        currentChart.destroy();
+      }
+
+      const ctx = document.getElementById('parameterChart').getContext('2d');
+      const def = parameterDefinitions[param];
+      const data = historicalData[param];
+
+      currentChart = new Chart(ctx, {
+        type: 'line',
+        data: {
+          labels: data.timestamps.map(formatTime),
+          datasets: [{
+            label: def.title + (def.unit ? ' (' + def.unit + ')' : ''),
+            data: data.values,
+            borderColor: def.color,
+            backgroundColor: def.color + '20',
+            borderWidth: 3,
+            fill: true,
+            tension: 0.4,
+            pointRadius: 4,
+            pointHoverRadius: 6,
+            pointBackgroundColor: def.color,
+            pointBorderColor: '#fff',
+            pointBorderWidth: 2
+          }]
+        },
+        options: {
+          responsive: true,
+          maintainAspectRatio: false,
+          plugins: {
+            legend: {
+              display: true,
+              position: 'top',
+              labels: {
+                font: {
+                  size: 12,
+                  family: 'Inter'
+                }
+              }
+            },
+            tooltip: {
+              backgroundColor: 'rgba(0, 0, 0, 0.8)',
+              padding: 12,
+              titleFont: {
+                size: 14,
+                family: 'Inter'
+              },
+              bodyFont: {
+                size: 13,
+                family: 'Inter'
+              }
+            }
+          },
+          scales: {
+            y: {
+              beginAtZero: false,
+              grid: {
+                color: 'rgba(0, 0, 0, 0.05)'
+              },
+              ticks: {
+                font: {
+                  family: 'Inter'
+                }
+              }
+            },
+            x: {
+              grid: {
+                color: 'rgba(0, 0, 0, 0.05)'
+              },
+              ticks: {
+                font: {
+                  family: 'Inter'
+                },
+                maxRotation: 45,
+                minRotation: 45
+              }
+            }
+          }
+        }
+      });
+    }
+
+    // ERA Widget Integration
+    const phValue = document.getElementById('phValue');
+    const doValue = document.getElementById('doValue');
+    const ecValue = document.getElementById('ecValue');
+    const tdsValue = document.getElementById('tdsValue');
+    const tempValue = document.getElementById('watertempValue');
+    const lastUpdate = document.getElementById('lastUpdate');
+
+    let configPh = null,
+        configDo = null,
+        configEc = null,
+        configTds = null,
+        configTemp = null;
+
+    const eraWidget = new EraWidget();
+    eraWidget.init({
+      needRealtimeConfigs: true,
+      needHistoryConfigs: false,
+      needActions: false,
+      maxRealtimeConfigsCount: 10,
+      minRealtimeConfigsCount: 0,
+
+      onConfiguration: (configuration) => {
+        // Map configurations - adjust indices based on your ERA setup
+        configPh   = configuration.realtime_configs[0];
+        configDo   = configuration.realtime_configs[1];
+        configEc   = configuration.realtime_configs[2];
+        configTds  = configuration.realtime_configs[3];
+        configTemp = configuration.realtime_configs[4];
+
+        console.log('Cấu hình cảm biến nhận được:', configuration.realtime_configs);
+      },
+
+      onValues: (values) => {
+        const now = new Date();
+        
+        if (configPh && values[configPh.id]) {
+          const val = values[configPh.id].value.toFixed(2);
+          phValue.innerHTML = val;
+          addDataPoint('ph', parseFloat(val), now);
+        }
+        if (configDo && values[configDo.id]) {
+          const val = values[configDo.id].value.toFixed(2);
+          doValue.innerHTML = val;
+          addDataPoint('do', parseFloat(val), now);
+        }
+        if (configEc && values[configEc.id]) {
+          const val = values[configEc.id].value.toFixed(2);
+          ecValue.innerHTML = val;
+          addDataPoint('ec', parseFloat(val), now);
+        }
+        if (configTds && values[configTds.id]) {
+          const val = values[configTds.id].value.toFixed(2);
+          tdsValue.innerHTML = val;
+          addDataPoint('tds', parseFloat(val), now);
+        }
+        if (configTemp && values[configTemp.id]) {
+          const val = values[configTemp.id].value.toFixed(2);
+          tempValue.innerHTML = val;
+          addDataPoint('temp', parseFloat(val), now);
+        }
+
+        // Update last update time
+        lastUpdate.textContent = formatTime(now);
+
+        // If modal is open, refresh the chart
+        if (currentParameter && document.getElementById('parameterModal').classList.contains('active')) {
+          drawChart(currentParameter);
+        }
+
+        console.log('Giá trị cập nhật từ ERA:', values);
+      },
+    });
+  </script>
+</body>
+</html>
+
EOF
)
